<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Encode - Chomp Tools</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/tools-recipes-style.css">
</head>
<body>
    <header class="site-header">
        <nav class="site-nav">
            <a href="index.html" class="site-logo">
                <img src="https://firebasestorage.googleapis.com/v0/b/chomp-chomp-recipes.firebasestorage.app/o/posts%2Fimages%2F1764687494472_MagicEraser_251202_001040.png?alt=media&token=97b7e1ec-632a-4dea-8037-e54789b4e2fd" alt="Chomp Chomp">
            </a>
            <div class="site-header-banner">
                <a href="index.html">
                    <img src="https://firebasestorage.googleapis.com/v0/b/chomp-chomp-recipes.firebasestorage.app/o/posts%2Fimages%2F1764685803167_Chomp%20Chomp%20logos%20-%204.jpeg?alt=media&token=13c16d51-2e97-4d29-9434-78850e97061b" alt="Chomp Chomp Tools">
                </a>
            </div>
            <button class="menu-toggle" aria-label="Toggle menu">☰</button>
            <div class="nav-tools-dropdown">
                <button class="tools-dropdown-btn" onclick="toggleToolsDropdown()">Menu ▼</button>
                <ul class="tools-dropdown-menu" id="toolsDropdown">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="ip.html">Your IP</a></li>
                    <li><a href="convert.html">Convert</a></li>
                    <li><a href="encode.html">Encode</a></li>
                    <li><a href="dante.html">Inferno Ipsum</a></li>
                    <li><a href="nautical.html">Nautical Ipsum</a></li>
                    <li><a href="subnet.html">Subnet Calculator</a></li>
                </ul>
            </div>
        </nav>
    </header>

    <div class="page-container">
        <div class="tool-page">
            <div class="tool-header">
                <img src="https://firebasestorage.googleapis.com/v0/b/chomp-chomp-recipes.firebasestorage.app/o/posts%2Fimages%2F1764612870991_encode.png?alt=media&token=798b07a9-299d-48fd-8e4b-abb0062ae4a3" alt="encode" style="max-width: 300px; margin: 0 auto 20px; display: block;">
                <p class="tool-subtitle">Transform text with URI, Base64, Hex, Binary & Hash functions</p>
            </div>

            <div class="info-box">
                <p><strong>About this encoder & decoder:</strong> This tool helps you transform text into different encoded formats or decode it back again. It's handy for developers, analysts, or anyone working with web data, files, or security tokens.</p>
                <p><strong>Encoding & Decoding:</strong> Use options like encode URI, base64, hex, or binary to safely convert text for URLs, data storage, or transmission. You can also decode them to reveal the original content.</p>
                <p><strong>Hashing functions:</strong> Hashing (like SHA-256) converts text into a fixed-length digital fingerprint. It can't be reversed, making it useful for verifying data integrity or securely storing passwords.</p>
            </div>

            <div class="tool-controls">
                <div class="control-group">
                    <label class="control-label">Select Encoding Type</label>
                    <select id="encodeType" class="form-select">
                        <option value="">Select encoding type...</option>
                        <option value="encodeURI">Encode URI</option>
                        <option value="decodeURI">Decode URI</option>
                        <option value="base64Encode">Base64 Encode</option>
                        <option value="base64Decode">Base64 Decode</option>
                        <option value="hexEncode">Hex Encode</option>
                        <option value="hexDecode">Hex Decode</option>
                        <option value="binaryEncode">Binary Encode</option>
                        <option value="binaryDecode">Binary Decode</option>
                        <option value="sha256Hash">SHA-256 Hash</option>
                    </select>
                </div>

                <div class="control-group">
                    <label class="control-label">Input</label>
                    <textarea id="input" class="control-input" placeholder="Enter text here..." style="min-height: 150px;"></textarea>
                </div>

                <div class="tool-actions">
                    <button class="tool-button" onclick="processEncode()">Process</button>
                    <button class="tool-button tool-button-secondary" onclick="clearFields()">Clear</button>
                </div>
            </div>

            <div class="tool-results">
                <div class="control-group">
                    <label class="control-label">Output</label>
                    <textarea id="output" class="control-input" readonly placeholder="Output will appear here..." style="min-height: 150px;"></textarea>
                </div>

                <div class="tool-actions">
                    <button class="tool-button tool-button-secondary" onclick="copyOutput()">Copy Output</button>
                </div>
            </div>

            <div style="text-align: center; margin-top: 40px;">
                <a href="index.html" class="btn btn-outline">← Back to Tools</a>
            </div>
        </div>
    </div>

    <footer class="site-footer">
        <div class="footer-content">
            <div class="footer-links">
                <a href="mailto:hi@chomp.ltd">hi@chomp.ltd</a>
                <a href="https://www.chomp.ltd">chomp chomp: cookies, etc.</a>
                <a href="https://recipes.chomp.ltd">chomp chomp: recipes & rituals</a>
            </div>
            <p style="margin-top: 15px;">&copy; 2025 Chomp Chomp</p>
        </div>
    </footer>

    <script>
        // Tools dropdown toggle
        function toggleToolsDropdown() {
            const dropdown = document.getElementById('toolsDropdown');
            dropdown.classList.toggle('active');
        }

        // Close dropdown when clicking outside
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.nav-tools-dropdown')) {
                const dropdown = document.getElementById('toolsDropdown');
                if (dropdown) {
                    dropdown.classList.remove('active');
                }
            }
        });

        // Mobile menu toggle
        const menuToggle = document.querySelector('.menu-toggle');
        const toolsDropdown = document.querySelector('.nav-tools-dropdown');

        if (menuToggle && toolsDropdown) {
            menuToggle.addEventListener('click', () => {
                toolsDropdown.classList.toggle('active');
            });
        }

        // Encoding functions
        const input = document.getElementById('input');
        const output = document.getElementById('output');
        const encodeType = document.getElementById('encodeType');

        function processEncode() {
            const selectedType = encodeType.value;
            if (!selectedType) {
                alert('Please select an encoding type');
                return;
            }

            const functions = {
                'encodeURI': encodeURIComp,
                'decodeURI': decodeURIComp,
                'base64Encode': base64Encode,
                'base64Decode': base64Decode,
                'hexEncode': hexEncode,
                'hexDecode': hexDecode,
                'binaryEncode': binaryEncode,
                'binaryDecode': binaryDecode,
                'sha256Hash': sha256Hash
            };

            if (functions[selectedType]) {
                functions[selectedType]();
            }
        }

        function encodeURIComp() {
            try {
                output.value = encodeURIComponent(input.value);
            } catch (e) {
                output.value = 'Error encoding text';
            }
        }

        function decodeURIComp() {
            try {
                output.value = decodeURIComponent(input.value);
            } catch (e) {
                output.value = 'Error decoding text';
            }
        }

        function base64Encode() {
            try {
                output.value = btoa(input.value);
            } catch (e) {
                output.value = 'Error encoding Base64';
            }
        }

        function base64Decode() {
            try {
                output.value = atob(input.value);
            } catch (e) {
                output.value = 'Error decoding Base64';
            }
        }

        function hexEncode() {
            try {
                output.value = Array.from(input.value)
                    .map(char => char.charCodeAt(0).toString(16).padStart(2, '0'))
                    .join('');
            } catch (e) {
                output.value = 'Error encoding to hex';
            }
        }

        function hexDecode() {
            try {
                const hex = input.value.replace(/\s/g, '');
                if (hex.length % 2 !== 0) {
                    output.value = 'Invalid hex string (odd length)';
                    return;
                }
                output.value = hex.match(/.{1,2}/g)
                    .map(byte => String.fromCharCode(parseInt(byte, 16)))
                    .join('');
            } catch (e) {
                output.value = 'Error decoding hex';
            }
        }

        function binaryEncode() {
            try {
                output.value = Array.from(input.value)
                    .map(char => char.charCodeAt(0).toString(2).padStart(8, '0'))
                    .join(' ');
            } catch (e) {
                output.value = 'Error encoding to binary';
            }
        }

        function binaryDecode() {
            try {
                const binary = input.value.replace(/\s/g, '');
                if (binary.length % 8 !== 0) {
                    output.value = 'Invalid binary string (length must be multiple of 8)';
                    return;
                }
                output.value = binary.match(/.{1,8}/g)
                    .map(byte => String.fromCharCode(parseInt(byte, 2)))
                    .join('');
            } catch (e) {
                output.value = 'Error decoding binary';
            }
        }

        async function sha256Hash() {
            try {
                const msgBuffer = new TextEncoder().encode(input.value);
                const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer);
                const hashArray = Array.from(new Uint8Array(hashBuffer));
                output.value = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
            } catch (e) {
                output.value = 'Error generating SHA-256 hash';
            }
        }

        function clearFields() {
            input.value = '';
            output.value = '';
            encodeType.selectedIndex = 0;
        }

        function copyOutput() {
            output.select();
            navigator.clipboard.writeText(output.value).then(() => {
                const btn = event.target;
                const originalText = btn.textContent;
                btn.textContent = 'Copied!';
                setTimeout(() => {
                    btn.textContent = originalText;
                }, 2000);
            }).catch(err => {
                alert('Failed to copy');
            });
        }
    </script>
</body>
</html>
